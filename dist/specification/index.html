<!DOCTYPE html><html lang="en" data-astro-cid-37fxchfa> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/x-icon" href="/favicon.ico"><title>Specification</title><meta name="title" content="Specification"><meta name="description" content="Specification"><meta property="og:type" content="website"><meta property="og:url" content="https://chatlsp.github.io/specification"><meta property="og:title" content="Specification"><meta property="og:description" content="Specification"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/about.DAYnTjyC.css">
<style>.container[data-astro-cid-ncjwpxht]{text-align:justify;text-justify:inter-word}
</style><script type="module" src="/_astro/hoisted.BScVxmeO.js"></script><style>[data-astro-transition-scope="astro-2g2b4d5l-1"] { view-transition-name: astro-2g2b4d5l-1; }@layer astro { ::view-transition-old(astro-2g2b4d5l-1) { animation: none; opacity: 0; mix-blend-mode: normal; }::view-transition-new(astro-2g2b4d5l-1) { animation: none; mix-blend-mode: normal; }::view-transition-group(astro-2g2b4d5l-1) { animation: none } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-2g2b4d5l-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-2g2b4d5l-1"] { animation: none; mix-blend-mode: normal; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-2g2b4d5l-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-2g2b4d5l-1"] { animation: none; mix-blend-mode: normal; }</style></head> <body data-astro-cid-37fxchfa> <div class="base-layout" data-astro-cid-37fxchfa> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-dmqpwcec> <a href="/" data-astro-cid-dmqpwcec>home</a> <a href="/about" data-astro-cid-dmqpwcec>about</a> <a href="/in-the-wild" data-astro-cid-dmqpwcec>in the wild</a> <a href="/implementations" data-astro-cid-dmqpwcec>implementations</a> <a href="/specification" data-astro-cid-dmqpwcec>specification</a> <a href="/publications" data-astro-cid-dmqpwcec>publications</a> </nav>  </header>  <main data-astro-cid-37fxchfa data-astro-transition-scope="astro-2g2b4d5l-1">  <div class="container" data-astro-cid-ncjwpxht> <h1 data-astro-cid-ncjwpxht>Specification</h1> <p data-astro-cid-ncjwpxht>This document describes the extended LSP methods supported by ChatLSP.</p> <p data-astro-cid-ncjwpxht>For the full LSP specifications, check the <a href="https://microsoft.github.io/language-server-protocol/" data-astro-cid-ncjwpxht>Official Page for Language Server Protocol</a>.</p> <hr data-astro-cid-ncjwpxht> <h3>textDocument/expectedType</h3> <p>Returns the expected type of an incomplete expression.</p> <h6>Request:</h6> <p><code>ExpectedTypeParams</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> expectedTypeParams</span><span style="color:#586E75;font-weight:bold"> extends</span><span style="color:#6C71C4"> TextDocumentPositionParams</span><span style="color:#657B83">,</span></span>
<span class="line"><span style="color:#6C71C4">  WorkDoneProgressParams</span><span style="color:#657B83">, </span><span style="color:#6C71C4">PartialResultParams</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h6>Response:</h6> <p><code>ExtectedType</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#93A1A1;font-style:italic">/**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">* The result of an ExpectedType request.</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">*/</span></span>
<span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> ExpectedType</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The expected type content</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  content</span><span style="color:#859900">:</span><span style="color:#CB4B16"> MarkupContent</span><span style="color:#657B83">;</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The expected type location</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  location</span><span style="color:#859900">:</span><span style="color:#CB4B16"> Location</span><span style="color:#657B83">;</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h3>textDocument/relevantTypes</h3> <p>Returns a list of strings, each representing a type definition that may be relevant at a given cursor location. The returned list contains components that can be used to build up the expected type.</p> <h6>Request:</h6> <p><code>RelevantTypesParams</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> RelevantTypesParams</span><span style="color:#586E75;font-weight:bold"> extends</span><span style="color:#6C71C4"> TextDocumentPositionParams</span><span style="color:#657B83">,</span></span>
<span class="line"><span style="color:#6C71C4">  WorkDoneProgressParams</span><span style="color:#657B83">, </span><span style="color:#6C71C4">PartialResultParams</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h6>Response:</h6> <p><code>RelevantTypes</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#93A1A1;font-style:italic">/**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">* The result of an RelevantTypes request.</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">*/</span></span>
<span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> RelevantTypes</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The list of relevant types contents</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  contents</span><span style="color:#859900">:</span><span style="color:#CB4B16"> MarkupContent</span><span style="color:#657B83">[];</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The list of relevant types locations</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  locations</span><span style="color:#859900">:</span><span style="color:#CB4B16"> Location</span><span style="color:#657B83">[];</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h3>textDocument/relevantHeaders</h3> <p>Returns a list of strings, each representing a function header that we can call to return the expected type, or part of it, at a given cursor location.</p> <h6>Request:</h6> <p><code>RelevantHeadersParams</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> RelevantHeadersParams</span><span style="color:#586E75;font-weight:bold"> extends</span><span style="color:#6C71C4"> TextDocumentPositionParams</span><span style="color:#657B83">,</span></span>
<span class="line"><span style="color:#6C71C4">  WorkDoneProgressParams</span><span style="color:#657B83">, </span><span style="color:#6C71C4">PartialResultParams</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h6>Response:</h6> <p><code>RelevantHeaders</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#93A1A1;font-style:italic">/**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">* The result of an RelevantHeaders request.</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">*/</span></span>
<span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> RelevantHeaders</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The list of relevant headers contents</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  contents</span><span style="color:#859900">:</span><span style="color:#CB4B16"> MarkupContent</span><span style="color:#657B83">[];</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The list of relevant headers locations</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  locations</span><span style="color:#859900">:</span><span style="color:#CB4B16"> Location</span><span style="color:#657B83">[];</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h3>textDocument/llmCompletion</h3> <p>Works similarly to the previously existing completion method, but uses LLM to complete the code, akin to GitHub copilot. The result is immediately visible in the editor, and users will be able to tab through different completions.</p> <h6>Request:</h6> <p><code>LLMCompletionParams</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> LLMCompletionParams</span><span style="color:#586E75;font-weight:bold"> extends</span><span style="color:#6C71C4"> TextDocumentPositionParams</span><span style="color:#657B83">,</span></span>
<span class="line"><span style="color:#6C71C4">  WorkDoneProgressParams</span><span style="color:#657B83">, </span><span style="color:#6C71C4">PartialResultParams</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h6>Response:</h6> <p><code>LLMCompletion</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#93A1A1;font-style:italic">/**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">* The result of a LLMCompletion request.</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">*/</span></span>
<span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> LLMCompletion</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * Completed snippet</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  snippet</span><span style="color:#859900">:</span><span style="color:#859900"> string</span><span style="color:#657B83">;</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The context returned by LLM</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  context</span><span style="color:#859900">:</span><span style="color:#859900"> object</span><span style="color:#657B83">;</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h3>textDocument/llmCompletionResolveErrors</h3> <p>Will attempt to resolve incorrect completions by using error rounds, iteratively fixing the generated code by replying with static errors and prompting for a corrected version.</p> <h6>Request:</h6> <p><code>LLMCompletionResolveErrorsParams</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> LLMCompletionResolveErrorsParams</span><span style="color:#586E75;font-weight:bold"> extends</span><span style="color:#6C71C4"> TextDocumentPositionParams</span><span style="color:#657B83">,</span></span>
<span class="line"><span style="color:#6C71C4">  WorkDoneProgressParams</span><span style="color:#657B83">, </span><span style="color:#6C71C4">PartialResultParams</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> <h6>Response:</h6> <p><code>LLMCompletionResolveErrors</code>defined as follows:</p> <pre class="astro-code solarized-light" style="background-color:#FDF6E3;color:#657B83; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#93A1A1;font-style:italic">/**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">* The result of a LLMCompletionResolveErrors request.</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">*/</span></span>
<span class="line"><span style="color:#859900">export</span><span style="color:#586E75;font-weight:bold"> interface</span><span style="color:#CB4B16"> LLMCompletionResolveErrors</span><span style="color:#657B83"> {</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * Completed snippet</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  snippet</span><span style="color:#859900">:</span><span style="color:#859900"> string</span><span style="color:#657B83">;</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  /**</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  * The context returned by LLM</span></span>
<span class="line"><span style="color:#93A1A1;font-style:italic">  */</span></span>
<span class="line"><span style="color:#657B83">  context</span><span style="color:#859900">:</span><span style="color:#859900"> object</span><span style="color:#657B83">;</span></span>
<span class="line"><span style="color:#657B83">}</span></span></code></pre> </div>  </main> <footer data-astro-cid-sz7xmlte></footer>  </div> </body></html> 